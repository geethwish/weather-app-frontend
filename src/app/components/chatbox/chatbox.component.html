<div
  class="flex flex-col flex-auto flex-shrink-0 rounded-2xl bg-white h-full lg:p-8 p-4"
>
  <div class="flex flex-col h-full overflow-x-auto container-max-height mb-4">
    <div class="flex flex-col h-full">
      <div class="grid grid-cols-12 gap-8" *ngIf="messages.length > 0">
        @for (message of messages; track $index) {
        <div
          [ngClass]="{
            'col-start-1 col-end-8 p-3 rounded-lg': message.type === 'BOT',
            'col-start-6 col-end-13 p-3 rounded-lg': message.type === 'USER'
          }"
        >
          <app-chat-bubble
            [text]="message.message"
            [type]="message.type"
          ></app-chat-bubble>
        </div>
        }

        <div
          class="col-start-1 col-end-8 p-3 rounded-lg"
          *ngIf="loaderService.loading$ | async"
        >
          <app-chat-bubble text="Analyzing..." type="BOT"></app-chat-bubble>
        </div>

        <div
          class="col-start-1 col-end-8 p-3 rounded-lg"
          *ngIf="loaderService.loading$ | async"
        >
          <div class="flex flex-row items-center">
            <div class="flex space-x-2 justify-center items-center bg-white">
              <span class="sr-only">Loading...</span>
              <div
                class="h-2 w-2 bg-blue-600 rounded-full animate-bounce [animation-delay:-0.3s]"
              ></div>
              <div
                class="h-2 w-2 bg-blue-600 rounded-full animate-bounce [animation-delay:-0.15s]"
              ></div>
              <div
                class="h-2 w-2 bg-blue-600 rounded-full animate-bounce"
              ></div>
            </div>
          </div>
        </div>
      </div>
      <div class="w-full">
        <app-weather-summary-card
          [data]="weatherData"
        ></app-weather-summary-card>
      </div>
    </div>
  </div>

  <div class="flex flex-row items-center h-16 rounded-xl bg-white w-full px-4">
    <div class="flex-grow ml-4">
      <div class="relative w-full">
        <input
          [(ngModel)]="chatInput"
          type="text"
          class="flex w-full border rounded-xl focus:outline-none focus:border-indigo-300 pl-4 h-10"
        />
      </div>
    </div>
    <div class="ml-4">
      <button
        class="flex items-center justify-center bg-indigo-500 hover:bg-indigo-600 rounded-xl text-white px-4 py-1 flex-shrink-0 h-10 text-lg"
        (click)="handleSubmit()"
        [disabled]="chatInput === ''"
      >
        <span>Send</span>
        <fa-icon [icon]="planeIcon" class="ml-1"></fa-icon>
      </button>
    </div>
  </div>
</div>
